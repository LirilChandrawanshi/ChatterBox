# Production Configuration for ChatterBox
# To use this profile, set SPRING_PROFILES_ACTIVE=production

# Server Configuration (Railway etc. inject PORT)
server.port=${PORT:8080}

# Start listening sooner so Render health check passes within deploy timeout (~60s).
# Beans are created on first use; first request may be slightly slower.
spring.main.lazy-initialization=true
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json

# Application Name
spring.application.name=ChatterBox

# MongoDB Configuration (REQUIRED on Render - set SPRING_DATA_MONGODB_URI environment variable)
spring.data.mongodb.uri=${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/chatterbox}
spring.data.mongodb.database=chatterbox

# Logging Configuration
logging.level.root=WARN
logging.level.com.example.ChatBot=INFO
logging.level.org.springframework.web.socket=INFO
logging.file.name=logs/chatterbox.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# WebSocket Configuration
spring.websocket.message-size-limit=524288
spring.websocket.send-buffer-size-limit=1048576
spring.websocket.send-time-limit=20000

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# ...existing code...

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# Security Headers
server.error.include-message=never
server.error.include-stacktrace=never

# Performance Tuning
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100

# Development Tools (DISABLED in production)
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# CORS Configuration (override per environment - set CORS_ALLOWED_ORIGINS on Render)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://*.vercel.app,https://*.onrender.com}

